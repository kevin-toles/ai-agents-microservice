# ==============================================================================
# AI Agents Service - Environment Configuration
# ==============================================================================
# Copy this file to .env and customize values as needed.
# All variables are prefixed with AI_AGENTS_ to match Pydantic Settings.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose up -d
# ==============================================================================

# Service Configuration
AI_AGENTS_PORT=8082
AI_AGENTS_ENVIRONMENT=development
AI_AGENTS_LOG_LEVEL=INFO

# External Service URLs (Kitchen Brigade Dependencies)
# When running in Docker, use host.docker.internal to reach host services
# When running in same docker network, use service names
#
# Port Assignment per Architecture:
#   8080 - llm-gateway (Router)
#   8081 - semantic-search-service (Cookbook)
#   8082 - ai-agents (Expeditor) - THIS SERVICE
#   8083 - Code-Orchestrator-Service (Sous Chef)
#
AI_AGENTS_LLM_GATEWAY_URL=http://host.docker.internal:8080
CODE_ORCHESTRATOR_URL=http://host.docker.internal:8083
SEMANTIC_SEARCH_URL=http://host.docker.internal:8081

# Neo4j Configuration
AI_AGENTS_NEO4J_URI=bolt://host.docker.internal:7687
AI_AGENTS_NEO4J_USER=neo4j
AI_AGENTS_NEO4J_PASSWORD=devpassword

# Agent Configuration
AI_AGENTS_DEFAULT_LLM_MODEL=claude-3-sonnet-20240229
AI_AGENTS_MAX_TRAVERSAL_HOPS=3
AI_AGENTS_DEFAULT_SIMILARITY_THRESHOLD=0.7
AI_AGENTS_ALLOW_GRAPH_CYCLES=true

# Feature Flags
AI_AGENTS_ENABLE_CROSS_REFERENCE_AGENT=true

# Request Timeouts
AI_AGENTS_LLM_TIMEOUT_SECONDS=60
AI_AGENTS_SEARCH_TIMEOUT_SECONDS=30
AI_AGENTS_GRAPH_TIMEOUT_SECONDS=30

# ==============================================================================
# Agent Functions Configuration (WBS-AGT1)
# ==============================================================================

# Inference Service (Line Cook - local LLM inference via llama.cpp)
INFERENCE_SERVICE_URL=http://host.docker.internal:8085

# Audit Service (Auditor - citation tracking)
AUDIT_SERVICE_URL=http://host.docker.internal:8084

# Code Reference Engine (ai-platform-data integration)
# WBS-AGT21: Code Reference Engine Client
CODE_REFERENCE_ENGINE_URL=http://host.docker.internal:8086
CODE_REFERENCE_REGISTRY=/path/to/ai-platform-data/mappings/registry.json
CODE_REFERENCE_QDRANT_URL=http://host.docker.internal:6333
CODE_REFERENCE_QDRANT_COLLECTION=code_chunks
CODE_REFERENCE_TIMEOUT=30.0
GITHUB_TOKEN=your_github_personal_access_token

# Neo4j Graph Database
# WBS-AGT22: Neo4j Graph Integration
# Per TIER_RELATIONSHIP_DIAGRAM.md - Spider web taxonomy structure
NEO4J_URI=bolt://host.docker.internal:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=devpassword
NEO4J_DATABASE=neo4j
NEO4J_MAX_POOL_SIZE=50
NEO4J_TIMEOUT=30.0

# Book Passage Retrieval
# WBS-AGT23: Book/JSON Passage Retrieval
BOOK_PASSAGES_QDRANT_URL=http://host.docker.internal:6333
BOOK_PASSAGES_QDRANT_COLLECTION=book_passages
BOOK_PASSAGES_BOOKS_DIR=/path/to/ai-platform-data/books/enriched
BOOK_PASSAGES_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
BOOK_PASSAGES_TIMEOUT=30

# Qdrant Vector Database
QDRANT_HOST=host.docker.internal
QDRANT_PORT=6333

# Redis (user: prefix cache tier - 24h TTL)
REDIS_URL=redis://host.docker.internal:6379/0

# Context Budget Overrides (optional - defaults in AGENT_FUNCTIONS_ARCHITECTURE.md)
# AI_AGENTS_EXTRACT_STRUCTURE_INPUT_BUDGET=16384
# AI_AGENTS_EXTRACT_STRUCTURE_OUTPUT_BUDGET=2048
# AI_AGENTS_SUMMARIZE_CONTENT_INPUT_BUDGET=8192
# AI_AGENTS_SUMMARIZE_CONTENT_OUTPUT_BUDGET=4096

# Default Presets (S1=Light, D4=Standard, D10=High Quality)
AI_AGENTS_DEFAULT_PRESET=D4

# Pipeline Configuration
AI_AGENTS_MAX_PIPELINE_STAGES=10
AI_AGENTS_PIPELINE_TIMEOUT_SECONDS=300
